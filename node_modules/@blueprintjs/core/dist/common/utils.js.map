{"version":3,"sources":["../src/common/utils.ts"],"names":[],"mappings":"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","file":"utils.js","sourcesContent":["/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n * Licensed under the BSD-3 License as modified (the “License”); you may obtain a copy\n * of the license at https://github.com/palantir/blueprint/blob/master/LICENSE\n * and https://github.com/palantir/blueprint/blob/master/PATENTS\n */\n\nimport { CLAMP_MIN_MAX } from \"./errors\";\n\nexport * from \"./utils/compareUtils\";\n\n// only accessible within this file, so use `Utils.isNodeEnv` from the outside.\ndeclare var process: { env: any };\n\n/** Returns whether `process.env.NODE_ENV` exists and equals `env`. */\nexport function isNodeEnv(env: string) {\n    return typeof process !== \"undefined\" && process.env && process.env.NODE_ENV === env;\n}\n\n/** Returns whether the value is a function. Acts as a type guard. */\n// tslint:disable-next-line:ban-types\nexport function isFunction(value: any): value is Function {\n    return typeof value === \"function\";\n}\n\n/**\n * Safely invoke the function with the given arguments, if it is indeed a\n * function, and return its value.\n */\nexport function safeInvoke<R>(func: (() => R) | undefined): R;\nexport function safeInvoke<A, R>(func: ((arg1: A) => R) | undefined, arg1: A): R;\nexport function safeInvoke<A, B, R>(func: ((arg1: A, arg2: B) => R) | undefined, arg1: A, arg2: B): R;\nexport function safeInvoke<A, B, C, R>(\n    func: ((arg1: A, arg2: B, arg3: C) => R) | undefined,\n    arg1: A,\n    arg2: B,\n    arg3: C,\n): R;\nexport function safeInvoke<A, B, C, D, R>(\n    func: ((arg1: A, arg2: B, arg3: C, arg4: D) => R) | undefined,\n    arg1: A,\n    arg2: B,\n    arg3: C,\n    arg4: D,\n): R;\n// tslint:disable-next-line:ban-types\nexport function safeInvoke(func: Function | undefined, ...args: any[]) {\n    if (isFunction(func)) {\n        return func(...args);\n    }\n}\n\n/**\n * Safely invoke the provided entity if it is a function; otherwise, return the\n * entity itself.\n */\nexport function safeInvokeOrValue<R>(funcOrValue: (() => R) | R | undefined): R;\nexport function safeInvokeOrValue<A, R>(funcOrValue: ((arg1: A) => R) | R | undefined, arg1: A): R;\nexport function safeInvokeOrValue<A, B, R>(funcOrValue: ((arg1: A, arg2: B) => R) | R | undefined, arg1: A, arg2: B): R;\nexport function safeInvokeOrValue<A, B, C, R>(\n    funcOrValue: ((arg1: A, arg2: B, arg3: C) => R) | R | undefined,\n    arg1: A,\n    arg2: B,\n    arg3: C,\n): R;\nexport function safeInvokeOrValue<A, B, C, D, R>(\n    funcOrValue: ((arg1: A, arg2: B, arg3: C, arg4: D) => R) | R | undefined,\n    arg1: A,\n    arg2: B,\n    arg3: C,\n    arg4: D,\n): R;\n// tslint:disable-next-line:ban-types\nexport function safeInvokeOrValue(funcOrValue: Function | any | undefined, ...args: any[]) {\n    return isFunction(funcOrValue) ? funcOrValue(...args) : funcOrValue;\n}\n\nexport function elementIsOrContains(element: HTMLElement, testElement: HTMLElement) {\n    return element === testElement || element.contains(testElement);\n}\n\n/**\n * Returns the difference in length between two arrays. A `null` argument is\n * considered an empty list. The return value will be positive if `a` is longer\n * than `b`, negative if the opposite is true, and zero if their lengths are\n * equal.\n */\nexport function arrayLengthCompare(a: any[] = [], b: any[] = []) {\n    return a.length - b.length;\n}\n\n/**\n * Returns true if the two numbers are within the given tolerance of each other.\n * This is useful to correct for floating point precision issues, less useful\n * for integers.\n */\nexport function approxEqual(a: number, b: number, tolerance = 0.00001) {\n    return Math.abs(a - b) <= tolerance;\n}\n\n/**\n * Clamps the given number between min and max values. Returns value if within\n * range, or closest bound.\n */\nexport function clamp(val: number, min: number, max: number) {\n    if (val == null) {\n        return val;\n    }\n    if (max < min) {\n        throw new Error(CLAMP_MIN_MAX);\n    }\n    return Math.min(Math.max(val, min), max);\n}\n\n/** Returns the number of decimal places in the given number. */\nexport function countDecimalPlaces(num: number) {\n    if (typeof num !== \"number\" || Math.floor(num) === num) {\n        return 0;\n    }\n    return num.toString().split(\".\")[1].length;\n}\n\n/**\n * Throttle an event on an EventTarget by wrapping it in a\n * `requestAnimationFrame` call. Returns the event handler that was bound to\n * given eventName so you can clean up after yourself.\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/scroll\n */\nexport function throttleEvent(target: EventTarget, eventName: string, newEventName: string) {\n    const throttledFunc = _throttleHelper(undefined, undefined, (event: Event) => {\n        target.dispatchEvent(new CustomEvent(newEventName, event));\n    });\n    target.addEventListener(eventName, throttledFunc);\n    return throttledFunc;\n}\n\nexport interface IThrottledReactEventOptions {\n    preventDefault?: boolean;\n}\n\n/**\n * Throttle a callback by wrapping it in a `requestAnimationFrame` call. Returns\n * the throttled function.\n * @see https://www.html5rocks.com/en/tutorials/speed/animations/\n */\nexport function throttleReactEventCallback(\n    callback: (event: React.SyntheticEvent<any>, ...otherArgs: any[]) => any,\n    options: IThrottledReactEventOptions = {},\n) {\n    const throttledFunc = _throttleHelper(\n        (event2: React.SyntheticEvent<any>) => {\n            if (options.preventDefault) {\n                event2.preventDefault();\n            }\n        },\n        (event2: React.SyntheticEvent<any>) => {\n            // prevent React from reclaiming the event object before we\n            // reference it\n            event2.persist();\n        },\n        (event2: React.SyntheticEvent<any>, ...otherArgs2: any[]) => {\n            callback(event2, ...otherArgs2);\n        },\n    );\n    return throttledFunc;\n}\n\nfunction _throttleHelper(\n    onBeforeIsRunningCheck: (...args: any[]) => void,\n    onAfterIsRunningCheck: (...args: any[]) => void,\n    onAnimationFrameRequested: (...args: any[]) => void,\n) {\n    let isRunning = false;\n    const func = (...args: any[]) => {\n        // don't use safeInvoke, because we might have more than its max number\n        // of typed params\n        if (isFunction(onBeforeIsRunningCheck)) {\n            onBeforeIsRunningCheck(...args);\n        }\n\n        if (isRunning) {\n            return;\n        }\n        isRunning = true;\n\n        if (isFunction(onAfterIsRunningCheck)) {\n            onAfterIsRunningCheck(...args);\n        }\n\n        requestAnimationFrame(() => {\n            if (isFunction(onAnimationFrameRequested)) {\n                onAnimationFrameRequested(...args);\n            }\n            isRunning = false;\n        });\n    };\n    return func;\n}\n"]}